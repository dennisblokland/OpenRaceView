<script lang="ts">
  import maplibregl from "maplibre-gl";
  import { onMount } from "svelte";
  import "maplibre-gl/dist/maplibre-gl.css";

  let mapContainer: HTMLDivElement;

  onMount(() => {
    const map = new maplibregl.Map({
      container: mapContainer,
      style:
        "https://raw.githubusercontent.com/go2garret/maps/main/src/assets/json/openStreetMap.json",
      center: [6.969302410966634, 50.35802481988148], // NÃ¼rburgring
      zoom: 12.2,
    });

    var trackCoordinates = [
      [50.3435412, 6.9599175, 0],
      [50.3435412, 6.9599175, 0],
      [50.3434065, 6.9596145, 26],
      [50.3432627, 6.9593308, 51],
      [50.3431075, 6.9590665, 77],
      [50.3429387, 6.9588215, 102],
      [50.3427652, 6.958592, 128],
      [50.342586, 6.9583733, 153],
      [50.3424045, 6.9581607, 178],
      [50.3422222, 6.9579357, 204],
      [50.3420428, 6.9577105, 230],
      [50.341866, 6.9574843, 255],
      [50.3416883, 6.9572598, 280],
      [50.3415128, 6.957035, 306],
      [50.3413382, 6.9568118, 331],
      [50.3411653, 6.9565998, 355],
      [50.3409985, 6.9563988, 378],
      [50.340829, 6.9562135, 401],
      [50.340656, 6.9560437, 424],
      [50.3404783, 6.955885, 447],
      [50.3403055, 6.9557422, 469],
      [50.3401427, 6.9556125, 489],
      [50.3399985, 6.9554898, 507],
      [50.339869, 6.9553677, 524],
      [50.3397487, 6.955244, 540],
      [50.3396402, 6.9551173, 555],
      [50.3395448, 6.9550018, 568],
      [50.3394658, 6.9548967, 580],
      [50.3394042, 6.9548045, 589],
      [50.3393513, 6.9547163, 598],
      [50.3393068, 6.9546447, 605],
      [50.339261, 6.9545773, 612],
      [50.3392157, 6.9544978, 620],
      [50.3391675, 6.9544187, 627],
      [50.3391173, 6.9543362, 635],
      [50.3390643, 6.954255, 644],
      [50.3390122, 6.9541723, 652],
      [50.3389607, 6.9540935, 660],
      [50.3389065, 6.9540138, 668],
      [50.338847, 6.9539337, 677],
      [50.3387825, 6.9538538, 686],
      [50.3387025, 6.9537753, 697],
      [50.3386068, 6.9536853, 709],
      [50.3384955, 6.953587, 723],
      [50.3383842, 6.9534983, 737],
      [50.3382767, 6.9533988, 751],
      [50.3381792, 6.9532612, 766],
      [50.3381218, 6.953076, 780],
      [50.3381092, 6.952875, 794],
      [50.3381328, 6.9526813, 808],
      [50.3381508, 6.9524887, 822],
      [50.3381327, 6.95228, 837],
      [50.3380853, 6.9520667, 853],
      [50.3380188, 6.9518713, 869],
      [50.3379228, 6.9516752, 887],
      [50.3378205, 6.9514822, 904],
      [50.3377477, 6.951286, 920],
      [50.337705, 6.9510905, 935],
      [50.3377852, 6.9508648, 953],
      [50.3378717, 6.9506378, 972],
      [50.337986, 6.9504005, 993],
      [50.3381225, 6.9501452, 1017],
      [50.3382777, 6.949884, 1042],
      [50.3384412, 6.9496255, 1068],
      [50.3386272, 6.9493765, 1095],
      [50.338824, 6.9491322, 1123],
      [50.3390128, 6.9489113, 1149],
      [50.339178, 6.9487258, 1172],
      [50.3393047, 6.9485552, 1191],
      [50.3393648, 6.9483475, 1207],
      [50.3393413, 6.9481182, 1223],
      [50.3392462, 6.9479163, 1241],
      [50.3390993, 6.9477475, 1261],
      [50.3389188, 6.9475888, 1284],
      [50.3387143, 6.9474295, 1310],
      [50.3384915, 6.9472508, 1338],
      [50.3382853, 6.9470795, 1364],
      [50.3381052, 6.9468707, 1388],
      [50.3379472, 6.9466123, 1414],
      [50.3378003, 6.9463118, 1441],
      [50.3376587, 6.9459598, 1470],
      [50.337524, 6.9455802, 1501],
      [50.3374177, 6.9451947, 1531],
      [50.3373592, 6.9448032, 1559],
      [50.3373607, 6.9444005, 1588],
      [50.3374115, 6.9439833, 1618],
      [50.3375243, 6.9435637, 1650],
      [50.3376685, 6.9431487, 1684],
      [50.3378083, 6.9427278, 1718],
      [50.3379352, 6.9422807, 1752],
      [50.3380207, 6.9417953, 1788],
      [50.338083, 6.9412995, 1824],
      [50.3381178, 6.940832, 1857],
      [50.3381397, 6.94043, 1886],
      [50.3381367, 6.9400698, 1912],
      [50.3380798, 6.9397505, 1935],
      [50.3380143, 6.93946, 1957],
      [50.3379603, 6.9391733, 1978],
      [50.337968, 6.9388655, 2000],
      [50.3380442, 6.9385762, 2022],
      [50.3381737, 6.938308, 2046],
      [50.3383483, 6.9380725, 2072],
      [50.3385523, 6.937883, 2098],
      [50.3387737, 6.9377145, 2125],
      [50.338972, 6.9374847, 2153],
      [50.3391137, 6.9371927, 2179],
      [50.3392338, 6.9369047, 2203],
      [50.3393787, 6.9366708, 2226],
      [50.3395587, 6.9365262, 2249],
      [50.339735, 6.936426, 2270],
      [50.3398788, 6.9362762, 2289],
      [50.339984, 6.9360428, 2309],
      [50.3400423, 6.9357397, 2332],
      [50.3400802, 6.935393, 2357],
      [50.3401138, 6.9350317, 2383],
      [50.3401473, 6.9346612, 2409],
      [50.3401785, 6.9343132, 2434],
      [50.3402345, 6.9340173, 2456],
      [50.3403432, 6.9337548, 2478],
      [50.3404968, 6.9335835, 2499],
      [50.3406982, 6.9335087, 2522],
      [50.3408928, 6.933473, 2544],
      [50.3410863, 6.9333588, 2567],
      [50.3412767, 6.9331435, 2593],
      [50.341446, 6.9328482, 2621],
      [50.3416017, 6.9325143, 2651],
      [50.341771, 6.9321472, 2683],
      [50.3419522, 6.9317453, 2718],
      [50.3421395, 6.931317, 2755],
      [50.3423278, 6.9308802, 2792],
      [50.3425223, 6.9304368, 2830],
      [50.3427075, 6.9300112, 2867],
      [50.3428942, 6.9295998, 2902],
      [50.3430987, 6.9292027, 2939],
      [50.3433335, 6.9288158, 2977],
      [50.3435932, 6.9284528, 3015],
      [50.3438678, 6.9281042, 3055],
      [50.3441418, 6.9277528, 3094],
      [50.3444077, 6.9274135, 3132],
      [50.3446633, 6.9270983, 3168],
      [50.3449037, 6.9267892, 3203],
      [50.3451313, 6.9265, 3235],
      [50.3453458, 6.9262403, 3266],
      [50.345573, 6.9260485, 3294],
      [50.3458267, 6.9259163, 3324],
      [50.346095, 6.9258435, 3354],
      [50.3463615, 6.9258193, 3384],
      [50.346636, 6.9258565, 3415],
      [50.3469117, 6.9259657, 3446],
      [50.3471893, 6.9261342, 3479],
      [50.3474712, 6.9263267, 3513],
      [50.3477572, 6.9265037, 3548],
      [50.3480585, 6.9266452, 3583],
      [50.348374, 6.9267593, 3619],
      [50.3486978, 6.9268453, 3655],
      [50.349005, 6.9269223, 3690],
      [50.3492907, 6.9269918, 3722],
      [50.349565, 6.9270295, 3753],
      [50.3498505, 6.9270173, 3784],
      [50.3501535, 6.926971, 3818],
      [50.3504725, 6.9269203, 3854],
      [50.3508112, 6.9268577, 3892],
      [50.351158, 6.9267873, 3931],
      [50.3515163, 6.9266813, 3971],
      [50.3518868, 6.926532, 4014],
      [50.3522698, 6.9263442, 4058],
      [50.3526532, 6.9261178, 4104],
      [50.3530207, 6.9258758, 4148],
      [50.3533805, 6.9256285, 4192],
      [50.3537217, 6.925382, 4234],
      [50.3540433, 6.9251732, 4272],
      [50.3543528, 6.9249818, 4309],
      [50.3546538, 6.9247898, 4346],
      [50.3549497, 6.9246073, 4381],
      [50.3552348, 6.9244382, 4415],
      [50.3554965, 6.9242695, 4446],
      [50.355731, 6.9240922, 4475],
      [50.3559468, 6.92389, 4503],
      [50.3561492, 6.9236732, 4530],
      [50.35634, 6.9234302, 4558],
      [50.356513, 6.923158, 4585],
      [50.3566622, 6.9228592, 4612],
      [50.356786, 6.922551, 4638],
      [50.3568955, 6.9222245, 4664],
      [50.3569918, 6.9218928, 4690],
      [50.3570782, 6.9215822, 4714],
      [50.3571563, 6.9212997, 4736],
      [50.357223, 6.9210437, 4755],
      [50.357285, 6.9208062, 4773],
      [50.357341, 6.9206073, 4789],
      [50.3573922, 6.9204402, 4802],
      [50.3574457, 6.9203095, 4813],
      [50.3575113, 6.9201948, 4824],
      [50.3575897, 6.920103, 4835],
      [50.3576787, 6.9200432, 4846],
      [50.357784, 6.9200067, 4858],
      [50.3579023, 6.9200008, 4871],
      [50.358035, 6.920036, 4886],
      [50.3581705, 6.9201283, 4902],
      [50.3582928, 6.920266, 4919],
      [50.3583955, 6.9204675, 4937],
      [50.3584713, 6.9207048, 4956],
      [50.3585317, 6.9209593, 4975],
      [50.3585968, 6.9212158, 4995],
      [50.3586637, 6.9214592, 5014],
      [50.3587282, 6.9216913, 5032],
      [50.3587865, 6.9219315, 5050],
      [50.3588427, 6.9222077, 5070],
      [50.3589132, 6.9225098, 5093],
      [50.3589923, 6.9228485, 5119],
      [50.359096, 6.923213, 5147],
      [50.359235, 6.9235872, 5178],
      [50.3594005, 6.923952, 5210],
      [50.3595995, 6.9243213, 5244],
      [50.3597933, 6.924695, 5278],
      [50.3599783, 6.9250975, 5313],
      [50.3601843, 6.9255093, 5350],
      [50.360414, 6.925919, 5389],
      [50.3606718, 6.9263313, 5430],
      [50.3609392, 6.9267498, 5472],
      [50.3612088, 6.9271825, 5515],
      [50.3614707, 6.9276317, 5558],
      [50.3617282, 6.9280882, 5601],
      [50.3619942, 6.928537, 5645],
      [50.362274, 6.9289473, 5687],
      [50.3625583, 6.9293067, 5728],
      [50.3628652, 6.9296057, 5768],
      [50.3631858, 6.9298373, 5807],
      [50.3634975, 6.9300393, 5845],
      [50.3637708, 6.9302157, 5878],
      [50.3640002, 6.9303347, 5905],
      [50.3642072, 6.9304032, 5928],
      [50.3644185, 6.9304268, 5952],
      [50.3646428, 6.9304118, 5977],
      [50.3648665, 6.9303913, 6002],
      [50.3650775, 6.9303965, 6025],
      [50.36528, 6.930457, 6048],
      [50.3654627, 6.930589, 6070],
      [50.3656032, 6.9307845, 6091],
      [50.3657008, 6.9310065, 6110],
      [50.3657853, 6.931213, 6128],
      [50.3658923, 6.9313942, 6145],
      [50.3660337, 6.9315175, 6163],
      [50.3661945, 6.9316112, 6182],
      [50.366353, 6.9316198, 6200],
      [50.366496, 6.9315228, 6217],
      [50.3666185, 6.9313717, 6235],
      [50.3667598, 6.9312605, 6252],
      [50.3669262, 6.931254, 6271],
      [50.3670988, 6.9313608, 6291],
      [50.3672608, 6.9315507, 6314],
      [50.3674202, 6.9317967, 6339],
      [50.3675725, 6.9320908, 6366],
      [50.3677262, 6.9324247, 6395],
      [50.3678885, 6.9327918, 6427],
      [50.3680688, 6.933171, 6460],
      [50.3682782, 6.9335495, 6496],
      [50.3685062, 6.9339047, 6531],
      [50.368758, 6.9342558, 6569],
      [50.3690132, 6.9346228, 6607],
      [50.369263, 6.935022, 6647],
      [50.3695178, 6.9354405, 6688],
      [50.369778, 6.9358667, 6730],
      [50.3700365, 6.9362728, 6771],
      [50.3702868, 6.9366438, 6809],
      [50.3705402, 6.9369575, 6845],
      [50.3707845, 6.9372182, 6878],
      [50.3709972, 6.937445, 6906],
      [50.3712023, 6.9376318, 6933],
      [50.371413, 6.9377333, 6957],
      [50.371639, 6.9377672, 6982],
      [50.3718683, 6.937726, 7008],
      [50.3721072, 6.9376458, 7035],
      [50.3723535, 6.9375503, 7063],
      [50.3726048, 6.937452, 7092],
      [50.372831, 6.9373603, 7118],
      [50.3730227, 6.937268, 7140],
      [50.373177, 6.9371055, 7161],
      [50.3732765, 6.936862, 7182],
      [50.3733227, 6.936564, 7203],
      [50.3733167, 6.9362415, 7226],
      [50.3733165, 6.9359087, 7250],
      [50.3733595, 6.9355685, 7275],
      [50.3734553, 6.9352253, 7301],
      [50.3735885, 6.9348768, 7330],
      [50.3737365, 6.9345365, 7359],
      [50.3738918, 6.934217, 7388],
      [50.3740453, 6.9339455, 7413],
      [50.3742065, 6.9337527, 7436],
      [50.374386, 6.9336742, 7457],
      [50.374566, 6.9337307, 7477],
      [50.3747203, 6.9338828, 7497],
      [50.374833, 6.9341517, 7520],
      [50.3749297, 6.934471, 7545],
      [50.3750417, 6.9348318, 7574],
      [50.3751718, 6.935215, 7604],
      [50.3753108, 6.935603, 7636],
      [50.375484, 6.9359638, 7668],
      [50.3756583, 6.9362788, 7698],
      [50.3758673, 6.9365323, 7727],
      [50.3761162, 6.9366933, 7757],
      [50.3763775, 6.936791, 7787],
      [50.376655, 6.9369317, 7819],
      [50.3769295, 6.9371463, 7853],
      [50.3771995, 6.9373867, 7888],
      [50.377433, 6.9376387, 7919],
      [50.3776248, 6.9379517, 7950],
      [50.3777652, 6.9382995, 7979],
      [50.377847, 6.9386652, 8007],
      [50.3778722, 6.9390355, 8033],
      [50.37785, 6.9394108, 8060],
      [50.3777788, 6.939781, 8087],
      [50.3776622, 6.9401335, 8115],
      [50.3775222, 6.9404925, 8145],
      [50.3773592, 6.940864, 8177],
      [50.3771908, 6.941238, 8210],
      [50.3770252, 6.9416053, 8242],
      [50.3768798, 6.9419238, 8269],
      [50.376752, 6.942184, 8293],
      [50.376624, 6.9423647, 8312],
      [50.3764908, 6.9424687, 8328],
      [50.3763503, 6.9425503, 8345],
      [50.3762327, 6.9426718, 8361],
      [50.3761597, 6.9428548, 8376],
      [50.3761387, 6.943073, 8392],
      [50.3761933, 6.9432805, 8408],
      [50.3762555, 6.9434567, 8422],
      [50.3764368, 6.9435788, 8444],
      [50.3765695, 6.9437382, 8462],
      [50.376636, 6.943989, 8482],
      [50.3766828, 6.9442763, 8503],
      [50.3767163, 6.9446198, 8527],
      [50.3767472, 6.9450108, 8555],
      [50.3767683, 6.9454253, 8585],
      [50.3767888, 6.9458707, 8616],
      [50.3768068, 6.9463488, 8650],
      [50.3768202, 6.9468398, 8685],
      [50.3768133, 6.947317, 8719],
      [50.3767668, 6.9477707, 8752],
      [50.3766985, 6.9482052, 8783],
      [50.3766277, 6.9486077, 8813],
      [50.376571, 6.9489522, 8838],
      [50.3765452, 6.949261, 8860],
      [50.3765843, 6.9495522, 8881],
      [50.376688, 6.9498143, 8903],
      [50.3768418, 6.9500345, 8926],
      [50.3770377, 6.9502082, 8952],
      [50.3772587, 6.9503445, 8978],
      [50.3775063, 6.9504235, 9006],
      [50.3777602, 6.950432, 9034],
      [50.3779888, 6.9504193, 9060],
      [50.3781645, 6.9504347, 9079],
      [50.3783237, 6.9505483, 9099],
      [50.378437, 6.9507475, 9118],
      [50.3785113, 6.951012, 9138],
      [50.378599, 6.9512992, 9161],
      [50.3786872, 6.9516193, 9185],
      [50.378776, 6.951969, 9212],
      [50.3788602, 6.9523237, 9239],
      [50.3789445, 6.9527063, 9268],
      [50.3790345, 6.9531092, 9298],
      [50.379119, 6.953545, 9330],
      [50.3792025, 6.9540098, 9364],
      [50.379275, 6.9545083, 9401],
      [50.3793463, 6.955004, 9437],
      [50.3794187, 6.955514, 9474],
      [50.3794855, 6.9560075, 9510],
      [50.3795467, 6.9564775, 9544],
      [50.3796018, 6.9569087, 9575],
      [50.3796657, 6.9573075, 9604],
      [50.3797763, 6.9576977, 9634],
      [50.379935, 6.9580667, 9666],
      [50.3801087, 6.9584293, 9698],
      [50.3802765, 6.9587847, 9729],
      [50.3804455, 6.959128, 9760],
      [50.380604, 6.9594457, 9789],
      [50.3807473, 6.95974, 9815],
      [50.3808508, 6.960023, 9838],
      [50.3809008, 6.9602995, 9858],
      [50.380904, 6.9605748, 9878],
      [50.3808548, 6.9608393, 9897],
      [50.3807557, 6.9610612, 9917],
      [50.3805945, 6.9612187, 9938],
      [50.3804073, 6.961327, 9960],
      [50.380188, 6.9613858, 9985],
      [50.3799497, 6.9613923, 10011],
      [50.3796995, 6.9613652, 10039],
      [50.379453, 6.9613275, 10067],
      [50.3791932, 6.9612882, 10096],
      [50.3789198, 6.9612412, 10126],
      [50.378638, 6.9612283, 10158],
      [50.3783403, 6.9612445, 10191],
      [50.3780433, 6.961267, 10224],
      [50.3777577, 6.961289, 10256],
      [50.3774843, 6.961322, 10286],
      [50.3772285, 6.9613993, 10315],
      [50.3769748, 6.961502, 10344],
      [50.3767235, 6.9616418, 10374],
      [50.3764783, 6.9618338, 10404],
      [50.3762367, 6.962071, 10436],
      [50.3760023, 6.9623533, 10469],
      [50.375778, 6.962677, 10503],
      [50.3755718, 6.963031, 10537],
      [50.375383, 6.9634282, 10572],
      [50.3752155, 6.9638567, 10608],
      [50.3750743, 6.9643125, 10643],
      [50.37494, 6.964788, 10680],
      [50.3748048, 6.9652802, 10718],
      [50.374673, 6.965782, 10757],
      [50.3745595, 6.9662727, 10794],
      [50.3744805, 6.9667692, 10830],
      [50.3744513, 6.967287, 10867],
      [50.3744587, 6.9678203, 10905],
      [50.3744732, 6.9683617, 10943],
      [50.3744757, 6.968905, 10982],
      [50.374462, 6.9694597, 11021],
      [50.3744377, 6.97002, 11061],
      [50.374399, 6.9705777, 11101],
      [50.3743555, 6.9711083, 11139],
      [50.374311, 6.9716097, 11175],
      [50.3742715, 6.9720752, 11208],
      [50.374234, 6.9725365, 11241],
      [50.3741905, 6.9729998, 11274],
      [50.3741308, 6.9734603, 11307],
      [50.3740592, 6.9739188, 11341],
      [50.3739817, 6.974381, 11375],
      [50.3738873, 6.9748392, 11409],
      [50.3737695, 6.9752903, 11444],
      [50.3736253, 6.9757267, 11478],
      [50.3734482, 6.9761355, 11513],
      [50.37325, 6.9765292, 11549],
      [50.3730585, 6.9769395, 11585],
      [50.3728813, 6.977377, 11622],
      [50.372719, 6.9778302, 11659],
      [50.3725633, 6.978274, 11695],
      [50.372435, 6.9786575, 11725],
      [50.3723377, 6.9789948, 11752],
      [50.3722818, 6.979348, 11777],
      [50.3722603, 6.979723, 11804],
      [50.3722827, 6.980108, 11831],
      [50.3723443, 6.9804983, 11860],
      [50.3724368, 6.9808903, 11890],
      [50.3725548, 6.9812753, 11920],
      [50.3726862, 6.9816718, 11952],
      [50.3728307, 6.9820675, 11984],
      [50.3729873, 6.9824407, 12016],
      [50.3731613, 6.982813, 12048],
      [50.3733423, 6.9831793, 12081],
      [50.373522, 6.9835352, 12113],
      [50.3736978, 6.9838623, 12144],
      [50.3738558, 6.9841425, 12170],
      [50.374, 6.9843912, 12194],
      [50.3741215, 6.9846948, 12220],
      [50.3742077, 6.9850423, 12246],
      [50.374256, 6.9854192, 12273],
      [50.3742957, 6.9858163, 12302],
      [50.3743427, 6.9862273, 12331],
      [50.3743848, 6.9866375, 12361],
      [50.374421, 6.9870345, 12389],
      [50.3744703, 6.9874062, 12416],
      [50.3745367, 6.987761, 12442],
      [50.3745948, 6.9880815, 12466],
      [50.3746452, 6.9883665, 12487],
      [50.3746627, 6.9886357, 12506],
      [50.3746242, 6.988878, 12524],
      [50.3745385, 6.9890887, 12542],
      [50.3744045, 6.9892367, 12560],
      [50.3742457, 6.9892917, 12578],
      [50.3740717, 6.9892662, 12597],
      [50.3738957, 6.9891485, 12619],
      [50.3737342, 6.9889598, 12641],
      [50.3735928, 6.9887077, 12665],
      [50.3734522, 6.988426, 12690],
      [50.3733122, 6.9881283, 12716],
      [50.3731773, 6.9877987, 12744],
      [50.3730202, 6.987508, 12771],
      [50.3728585, 6.9872285, 12798],
      [50.372707, 6.9869285, 12825],
      [50.3725765, 6.9866328, 12851],
      [50.3724577, 6.9863665, 12874],
      [50.372356, 6.9861203, 12894],
      [50.3722785, 6.9859108, 12912],
      [50.3722085, 6.9857262, 12927],
      [50.3721077, 6.9855928, 12942],
      [50.3719772, 6.9855227, 12957],
      [50.3718472, 6.9855483, 12971],
      [50.3717298, 6.9856613, 12987],
      [50.371657, 6.9858482, 13002],
      [50.3716407, 6.9860697, 13018],
      [50.3716865, 6.986273, 13033],
      [50.3717962, 6.9864317, 13050],
      [50.3719388, 6.9865298, 13067],
      [50.3721025, 6.9866325, 13087],
      [50.3722685, 6.9868163, 13110],
      [50.37243, 6.9870777, 13135],
      [50.3725813, 6.9873785, 13163],
      [50.3727125, 6.9877027, 13190],
      [50.3728185, 6.9880658, 13218],
      [50.3729028, 6.988471, 13248],
      [50.3729867, 6.9889038, 13280],
      [50.3730738, 6.9893552, 13314],
      [50.3731625, 6.9898117, 13348],
      [50.3732407, 6.9902682, 13381],
      [50.3732945, 6.9906993, 13412],
      [50.3733275, 6.991106, 13441],
      [50.37336, 6.9914612, 13467],
      [50.3734285, 6.9917747, 13490],
      [50.3735418, 6.992058, 13514],
      [50.373674, 6.9923212, 13538],
      [50.3738137, 6.9925972, 13563],
      [50.3739618, 6.9928683, 13588],
      [50.3741253, 6.9931253, 13614],
      [50.3742975, 6.9933493, 13639],
      [50.3744683, 6.993543, 13662],
      [50.3746303, 6.9937113, 13684],
      [50.3748022, 6.9938367, 13705],
      [50.37499, 6.9939108, 13726],
      [50.3751947, 6.9939172, 13749],
      [50.3754037, 6.9938608, 13773],
      [50.3756168, 6.9938325, 13797],
      [50.3758355, 6.9938795, 13821],
      [50.3760413, 6.9940072, 13846],
      [50.3762427, 6.9941885, 13872],
      [50.3764398, 6.99438, 13897],
      [50.3766185, 6.9945717, 13921],
      [50.376761, 6.9947723, 13943],
      [50.3768637, 6.9950103, 13963],
      [50.376926, 6.995296, 13984],
      [50.3769237, 6.9956265, 14008],
      [50.376855, 6.9959573, 14033],
      [50.3767503, 6.9963068, 14060],
      [50.3766427, 6.9966613, 14088],
      [50.3765517, 6.9970605, 14118],
      [50.3764777, 6.9975013, 14150],
      [50.376407, 6.9979467, 14183],
      [50.3763302, 6.9983912, 14215],
      [50.3762422, 6.9987922, 14245],
      [50.3761162, 6.9991557, 14275],
      [50.3759512, 6.9994648, 14303],
      [50.3757452, 6.9997168, 14332],
      [50.3755332, 6.9999548, 14361],
      [50.3753522, 7.0002382, 14390],
      [50.3752213, 7.0005803, 14418],
      [50.3751305, 7.0009518, 14446],
      [50.3750837, 7.001335, 14474],
      [50.3750475, 7.0016748, 14498],
      [50.3749748, 7.001987, 14522],
      [50.3748558, 7.0022598, 14545],
      [50.3747027, 7.0024927, 14569],
      [50.3745473, 7.002717, 14593],
      [50.374381, 7.0029313, 14617],
      [50.3742147, 7.003142, 14640],
      [50.3740625, 7.0033242, 14662],
      [50.3739302, 7.0034638, 14679],
      [50.3737965, 7.0035632, 14696],
      [50.3736562, 7.0036287, 14712],
      [50.3735105, 7.0036527, 14728],
      [50.3733563, 7.0036295, 14746],
      [50.3731957, 7.0035687, 14764],
      [50.3730342, 7.0034602, 14784],
      [50.3728683, 7.0033348, 14804],
      [50.3726907, 7.0032037, 14826],
      [50.372508, 7.0030875, 14848],
      [50.3723207, 7.002985, 14870],
      [50.372129, 7.0028813, 14892],
      [50.3719505, 7.0027947, 14913],
      [50.3717768, 7.0027842, 14933],
      [50.3716067, 7.0028557, 14952],
      [50.3714535, 7.003003, 14972],
      [50.3713192, 7.0032038, 14993],
      [50.3712, 7.0034223, 15013],
      [50.3711077, 7.0036428, 15032],
      [50.3710408, 7.0038672, 15049],
      [50.3709962, 7.0041063, 15067],
      [50.3709713, 7.004332, 15083],
      [50.3709527, 7.0045467, 15099],
      [50.3709373, 7.0047592, 15114],
      [50.3708998, 7.0049788, 15130],
      [50.3708213, 7.0051757, 15146],
      [50.3707033, 7.0053197, 15163],
      [50.3705628, 7.0054003, 15180],
      [50.370418, 7.0054302, 15196],
      [50.3702705, 7.0054337, 15212],
      [50.370126, 7.0054343, 15228],
      [50.369985, 7.0054422, 15244],
      [50.369848, 7.0054545, 15259],
      [50.3697168, 7.005473, 15274],
      [50.3695897, 7.0054925, 15288],
      [50.369471, 7.0055085, 15301],
      [50.3693493, 7.0055207, 15315],
      [50.3692308, 7.005535, 15328],
      [50.3691155, 7.0055142, 15341],
      [50.3690028, 7.0054487, 15355],
      [50.3689028, 7.0053387, 15368],
      [50.368823, 7.005197, 15381],
      [50.3687647, 7.0050353, 15395],
      [50.3687265, 7.004856, 15408],
      [50.368712, 7.004657, 15422],
      [50.368718, 7.0044503, 15437],
      [50.3687263, 7.0042367, 15452],
      [50.3687332, 7.0039905, 15470],
      [50.3687448, 7.0037052, 15490],
      [50.368763, 7.0033852, 15513],
      [50.3687843, 7.0030557, 15536],
      [50.368808, 7.0027072, 15561],
      [50.3688278, 7.0023555, 15586],
      [50.3688068, 7.00202, 15610],
      [50.3687332, 7.0017112, 15633],
      [50.368604, 7.0014702, 15656],
      [50.3684355, 7.0013042, 15678],
      [50.3682383, 7.0012093, 15701],
      [50.3680377, 7.0010817, 15725],
      [50.3678507, 7.0008837, 15750],
      [50.3676555, 7.0006533, 15777],
      [50.3674485, 7.0004057, 15806],
      [50.367223, 7.0001675, 15836],
      [50.3669848, 6.9999678, 15866],
      [50.3667327, 6.9997873, 15897],
      [50.3664773, 6.9996382, 15927],
      [50.3662033, 6.999544, 15959],
      [50.3659163, 6.9995298, 15991],
      [50.3656145, 6.9995657, 16024],
      [50.3653055, 6.9995902, 16059],
      [50.364985, 6.9996095, 16094],
      [50.3646822, 6.9996262, 16128],
      [50.3643927, 6.9996492, 16160],
      [50.3641432, 6.999668, 16188],
      [50.3639278, 6.9996395, 16212],
      [50.3637143, 6.9995165, 16237],
      [50.3635203, 6.999333, 16262],
      [50.3633392, 6.9990912, 16289],
      [50.3631877, 6.9987815, 16317],
      [50.363087, 6.9984108, 16345],
      [50.3630212, 6.9980247, 16374],
      [50.3629532, 6.9976545, 16401],
      [50.3628748, 6.997295, 16428],
      [50.3627433, 6.9969413, 16457],
      [50.3625667, 6.99661, 16487],
      [50.3623663, 6.9962788, 16520],
      [50.362158, 6.9959607, 16552],
      [50.3619453, 6.9956518, 16584],
      [50.3617137, 6.9953915, 16616],
      [50.3614648, 6.9951513, 16649],
      [50.3612072, 6.9949302, 16681],
      [50.3609432, 6.9947257, 16714],
      [50.3606968, 6.9945283, 16745],
      [50.3604835, 6.9943557, 16772],
      [50.3602858, 6.9941628, 16797],
      [50.3601077, 6.9939258, 16823],
      [50.359942, 6.9936502, 16850],
      [50.3597943, 6.9933457, 16877],
      [50.3596852, 6.9930197, 16903],
      [50.3595738, 6.9927023, 16929],
      [50.3594345, 6.992394, 16956],
      [50.359271, 6.992072, 16985],
      [50.3591147, 6.9917092, 17016],
      [50.3589842, 6.9912883, 17049],
      [50.3588917, 6.9908255, 17084],
      [50.358816, 6.9903323, 17120],
      [50.3587308, 6.9898235, 17157],
      [50.3586297, 6.9893155, 17195],
      [50.3585098, 6.9888042, 17234],
      [50.3583875, 6.9883025, 17272],
      [50.3582818, 6.9878173, 17308],
      [50.3581975, 6.9873498, 17342],
      [50.3581438, 6.9868812, 17376],
      [50.3581127, 6.9864363, 17408],
      [50.358139, 6.986036, 17437],
      [50.3582165, 6.9856777, 17463],
      [50.3583425, 6.9853525, 17490],
      [50.3584973, 6.9850775, 17516],
      [50.3586657, 6.98481, 17543],
      [50.3588, 6.9845185, 17569],
      [50.3588848, 6.984209, 17592],
      [50.3589253, 6.9838875, 17616],
      [50.3589055, 6.9835648, 17639],
      [50.3588338, 6.983246, 17663],
      [50.3587218, 6.98293, 17688],
      [50.358587, 6.9826042, 17716],
      [50.3584397, 6.9822617, 17745],
      [50.3582975, 6.9819295, 17774],
      [50.3581647, 6.9816303, 17799],
      [50.35803, 6.9813983, 17822],
      [50.3578625, 6.9812543, 17843],
      [50.3576957, 6.9812065, 17862],
      [50.3575313, 6.9812767, 17881],
      [50.3573828, 6.9814395, 17901],
      [50.3572323, 6.9816365, 17923],
      [50.3570727, 6.9818658, 17947],
      [50.3569237, 6.9821465, 17973],
      [50.3567963, 6.9824808, 18000],
      [50.3566828, 6.9828625, 18030],
      [50.3565795, 6.9832785, 18062],
      [50.3564817, 6.983704, 18094],
      [50.3563917, 6.984155, 18127],
      [50.356316, 6.9845792, 18159],
      [50.3562512, 6.984933, 18185],
      [50.356164, 6.9852422, 18209],
      [50.3560755, 6.9855285, 18231],
      [50.3558343, 6.9857222, 18261],
      [50.3556365, 6.985915, 18287],
      [50.3554002, 6.9860457, 18315],
      [50.3551538, 6.9861553, 18344],
      [50.3549182, 6.986263, 18371],
      [50.3546783, 6.9863167, 18398],
      [50.3544323, 6.986308, 18425],
      [50.354175, 6.9862198, 18455],
      [50.3539378, 6.9860525, 18484],
      [50.3537185, 6.9858245, 18513],
      [50.35353, 6.9855147, 18543],
      [50.3533605, 6.9851438, 18576],
      [50.3532152, 6.9847328, 18609],
      [50.353066, 6.9842947, 18644],
      [50.3529093, 6.983843, 18681],
      [50.3527425, 6.9833713, 18719],
      [50.3525625, 6.982885, 18759],
      [50.3523733, 6.9823972, 18799],
      [50.35219, 6.9819202, 18839],
      [50.3520135, 6.9814683, 18876],
      [50.3518398, 6.9810122, 18914],
      [50.3517467, 6.9807636, 18934],
    ];

    const geojson: GeoJSON.Feature<GeoJSON.LineString> = {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: trackCoordinates.map(([lat, lon]) => [lon, lat]), // flip
      },
      properties: {},
    };
    map.on('load', () => {
      console.log(map);
    map.addSource("my-line", {
      type: "geojson",
      data: geojson,
    });

    map.addLayer({
      id: "my-line-layer",
      type: "line",
      source: "my-line",
      layout: {
        "line-join": "round",
        "line-cap": "round",
      },
      paint: {
        "line-color": "#ff0000",
        "line-width": 4,
      },
    });
  });
    return () => map.remove();
  });
</script>

<div bind:this={mapContainer} class="w-full h-[500px] rounded shadow" />
